<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Accessing Couchbase Lite from React Native · React Native Couchbase Lite</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Accessing Couchbase Lite from React Native · React Native Couchbase Lite"/><meta property="og:type" content="website"/><meta property="og:url" content="https://react-native-cbl.github.io/react-native-cbl/index.html"/><meta property="og:description" content="The first thing you need to do to access Couchbase Lite database is to open it:"/><meta property="og:image" content="https://react-native-cbl.github.io/react-native-cbl/img/icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://react-native-cbl.github.io/react-native-cbl/img/icon.png"/><link rel="shortcut icon" href="/react-native-cbl/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/react-native-cbl/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-cbl/"><img class="logo" src="/react-native-cbl/img/icon.svg" alt="React Native Couchbase Lite"/><h2 class="headerTitle">React Native Couchbase Lite</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/react-native-cbl/docs/introduction.html" target="_self">Docs</a></li><li class=""><a href="/react-native-cbl/docs/api-react-native-cbl.html" target="_self">API</a></li><li class=""><a href="/react-native-cbl/en/help.html" target="_self">Help</a></li><li class=""><a href="https://github.com/bjornd/react-native-cbl" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Basics</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Basics</h3><ul><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/documents-and-views.html">Views and Documents</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/react-native-cbl/docs/accessing-cbl-from-rn.html">Accessing Couchbase Lite from React Native</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/cbl-provider.html">cblProvider</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/example-app.html">Example App</a></li></ul></div><div class="navGroup navGroupActive"><h3>Advanced Topics</h3><ul><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/attachments.html">Attachments</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/replication.html">Replication</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/authorization.html">Authorization</a></li><li class="navListItem"><a class="navItem" href="/react-native-cbl/docs/prebuilt-db.html">Prebuilt Databases</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Accessing Couchbase Lite from React Native</h1></header><article><div><span><p>The first thing you need to do to access Couchbase Lite database is to open it:</p>
<pre><code class="hljs"><span class="hljs-keyword">import</span> CouchbaseLite <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native-cbl'</span>

CouchbaseLite.openDb(<span class="hljs-string">'mydbname'</span>).then( <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">//when database is opened</span>
})
</code></pre>
<p>When database is opened you can perform all the standard crud operations on documents:</p>
<pre><code class="hljs"><span class="hljs-comment">//load document from database</span>
CouchbaseLite.getDocument(<span class="hljs-string">'document-id'</span>).then( <span class="hljs-function"><span class="hljs-params">docProperties</span> =&gt;</span> {} )

<span class="hljs-comment">//create document with autogenerated id</span>
CouchbaseLite.createDocument(<span class="hljs-string">'document-id'</span>).then( <span class="hljs-function"><span class="hljs-params">docId</span> =&gt;</span> {} )

<span class="hljs-comment">//update document</span>
CouchbaseLite.updateDocument(<span class="hljs-string">'document-id'</span>, { <span class="hljs-attr">key</span>: <span class="hljs-string">'value'</span> }).then( <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {} )

<span class="hljs-comment">//update document with autogenerated id</span>
CouchbaseLite.deleteDocument(<span class="hljs-string">'document-id'</span>).then( <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {} )
</code></pre>
<p>Retrieving collection of documents is a bit more tricky. First you need to supply view you're going to query. View is defined by map function which says Couchbase Lite which documents you want to get and in which order:</p>
<pre><code class="hljs">CouchbaseLite.openDb(<span class="hljs-string">'mydbname'</span>).then( <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    CouchbaseLite.updateDocument(
      <span class="hljs-string">'_design/main'</span>, {
      <span class="hljs-attr">views</span>: {
        <span class="hljs-attr">notes</span>: {
          <span class="hljs-attr">map</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">doc</span>) </span>{
            <span class="hljs-keyword">if</span> (doc.docType == <span class="hljs-string">'note'</span>) {
              emit(doc.createdTime, <span class="hljs-literal">null</span>)
            }
          }.toString(),
        },
      }
    })
})
</code></pre>
<p>After that you can query defined view:</p>
<pre><code class="hljs">CouchbaseLite.query(<span class="hljs-string">'notes'</span>, { <span class="hljs-attr">descending</span>: <span class="hljs-literal">true</span> })
</code></pre>
<p>Parameter <code>descending</code> makes the Couchbase return documents in reverse order. There are some other parameters you can provide to query method to modify the way documents are returned.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="documents-and-views.html">← Views and Documents</a><a class="docs-next button" href="cbl-provider.html">cblProvider →</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/react-native-cbl/" class="nav-home"><img src="/react-native-cbl/img/icon.svg" alt="React Native Couchbase Lite" width="66" height="58"/></a><div><h5>Docs</h5><a href="/react-native-cbl/docs/en/introduction.html">Introduction</a><a href="/react-native-cbl/docs/en/api-react-native-cbl.html">API reference</a></div></section><section class="copyright">Copyright © 2018</section></footer></div></body></html>